### IP 特点

+ 不可靠 

  `IP` 协议不能保证 `IP` 数据报能够成功到达目的地，`IP` 仅提供最好的传输服务，发生错误则丢弃该数据包，然后发送 `ICMP` 消息给信源端。任何要求的可靠性必须由上层来提供 (TCP)

+ 无连接

  `IP` 并不维护任何有关后续数据报的状态信息。每个数据报的处理是互相独立的。`IP`数据报到达的时间可能是不同的

---

### IP 首部

1. 普通的 `IP` 首部长为 `20` 个字节
2. 4个字节的 32 `bit` 值每次传 8 位，这种传输次序称为网络字节序

---

### IP 路由选择

如果目的主机和源主机直接相连或都在一个共享网络上，那么 `IP` 数据报就直接送到目的主机上。否则，

主机把数据报发往一默认的路由器上，由路由器来转发数据报

+ 路由表

  `IP` 层在内存中有一个内存表。当一份数据报进行发送时，它都要对该表搜索一次

  路由表包含的信息：

  + 目的 `IP` 地址 可以是主机地址也可以是网络地址
  + 下一站路由器的 `IP` 地址或者直接相连的 `IP` 地址
  + 标志。其中一个标志指目的 `IP` 是网络地址还是主机地址，另一个标志是指下一站路由器是否为真正的下一站路由器，还是一个直接相连的接口
  + 为数据报的传输指定一个网络接口

+ IP 路由选择

  1. 搜索路由表，寻找能与目的 `IP` 地址完全匹配的表目（网络号和主机号都要匹配），如果找到，则把报文发送给该表目指定的下一站路由器或直接连接的网络接口（取决于标志字段的值）
  2. 搜索路由表，寻找能与目的网络号相匹配的表目。如果找到，则把报文发送给该表目指定的下一站路由器或直接连接的网络接口（取决于标志字段的值）
  3. 搜索路由表，寻找标为 “默认 （default) “ 的表目，如果找到，则把报文发送给该表目指定的下一站路由器

  若都找不到，那么该数据报就不能被发送



---



### 子网寻址

通过把主机号再分为一个子网号和一个主机号，因为同一个网络中不需要安排这么多主机



---



### 子网掩码

子网掩码是一个 32 bit 的值，其中值为 1 的比特留给网络号和主机号，为 0 的比特留给主机号



